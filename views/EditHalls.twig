<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Edit Halls</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
		<link href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
        <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

	</head>
	<body>
		<div class="container mt-5">
			<h1>Edit Your Halls Here.</h1>
			<table id="dataTable" class="table table-striped table-bordered">
				<thead>
					<tr>
						{# <th>ID</th> #}
						<th>Concert Hall</th>
						<th>Action</th>
					</tr>
				</thead>
				<tbody>
        {% for obj in data.hall %}
            <tr>
                <td>{{ obj }}</td>
                <td>
                    {# {% if obj.isActive %} #}
                        <i class="fas fa-check-circle text-success" role="button"></i>
                    {# {% else %} #}
                        <i class="fas fa-times-circle text-danger" role="button"></i> <!-- Inactive icon -->
                    {# {% endif %} #}
                </td>
            </tr>
        {% endfor %}
    </tbody>
			</table>
		</div>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
		<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
        <script src="../routes/AppRoutes.js"></script>

		<script>
			$(document).ready(function () {
$('#dataTable').DataTable();
});
		</script>

{# Delete the Entry     delete-concert-hall#}
<script>

   $(document).on('click', '.fa-times-circle', function () {
    const row = $(this).closest('tr');
    const concertHall = row.find('td:first').text();
    $.ajax({
      method: 'POST',
      url: '/app/delete-concert-hall',
      data: {
        concertHall: concertHall
      },
      success: function (response) {
        showToast('success', 'Record Romoved successfully ');
      },
      error: function (err) {
        console.error('Error Removing the record:', err.responseText);
        showToast('error', 'Error Romoving the record');
      }
    });
  });

  function showToast(type, message) {
    Toastify({
      text: message,
      duration: 3000,
      gravity: 'top',
      position: 'right',
      backgroundColor: type === 'success' ? 'green' : 'red',
    }).showToast();
  }

</script>

{# Recover the entry  #}
<script>
  $(document).on('click', '.fa-check-circle', function () {
    const row = $(this).closest('tr');
    const concertHall = row.find('td:first').text();
    $.ajax({
      method: 'POST',
      url: '/app/recover-concert-hall',
      data: {
        concertHall: concertHall
      },
      success: function (response) {
        if (response.existsInBothCollections) {
          console.log('Record successfully Recovered');
          showToast('success', 'Record successfully Recovered');
        } else {
          console.log('Value is not deleted');
          showToast('error', 'Record is not Found');
        }
      },
      error: function (err) {
        console.error('Error recovering the record:', err.responseText);
        showToast('error', 'Error recovering the record');
      }
    });
  });

  function showToast(type, message) {
    Toastify({
      text: message,
      duration: 3000,
      gravity: 'top',
      position: 'right',
      backgroundColor: type === 'success' ? 'green' : 'red',
    }).showToast();
  }
</script>
    
	</body>
</html>
